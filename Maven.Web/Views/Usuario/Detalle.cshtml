@model Maven.Application.DTOs.UsuarioDetailDto

@{
    ViewData["Title"] = "Detalle de Usuario";
}

<div class="container mt-4">

    <!-- Encabezado + botón volver -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
            <h2 class="mb-0">Detalle de Usuario</h2>
            <small class="text-muted">Información del perfil y métricas calculadas (LINQ)</small>
        </div>
        <a class="btn btn-outline-secondary" asp-action="Index">
            <i class="bi bi-arrow-left"></i> Volver
        </a>
    </div>

    <div class="row g-3">
        



        <div class="col-lg-8">
            <div class="card shadow-sm">
                <div class="card-header bg-light">
                    <strong>Perfil</strong>
                </div>

                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <div class="text-muted small">Nombre</div>
                            <div class="fw-semibold">@Model.NombreCompleto</div>
                        </div>
                        <div class="col-md-6">
                            <div class="text-muted small">Correo</div>
                            <div class="fw-semibold">@Model.Correo</div>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-4">
                            <div class="text-muted small">Rol</div>
                            <span class="badge bg-primary">@Model.Rol</span>
                        </div>

                        <div class="col-md-4">
                            <div class="text-muted small">Estado</div>
                            @{
                                var claseEstado = Model.Estado?.ToUpper() == "ACTIVO" ? "bg-success" : "bg-danger";
                            }
                            <span class="badge @claseEstado">@Model.Estado</span>
                        </div>

                        <div class="col-md-4">
                            <div class="text-muted small">Fecha de registro</div>
                            <div class="fw-semibold">@Model.FechaRegistro.ToString("dd/MM/yyyy")</div>
                        </div>
                    </div>

                    <hr />

                    <div class="alert alert-light border mb-0">
                        <div class="fw-semibold mb-1">Notas</div>
                        <div class="text-muted small">
                            Los valores de “subastas creadas” y “pujas realizadas” se obtienen mediante consultas LINQ,
                            no están almacenados en la base de datos.
                        </div>
                    </div>
                </div>
            </div>
        </div>

  
        <div class="col-lg-4">
            <div class="card shadow-sm">
                <div class="card-header bg-light">
                    <strong>Campos calculados (LINQ)</strong>
                </div>

                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center p-3 border rounded mb-2">
                        <div>
                            <div class="text-muted small">Subastas creadas</div>
                            <div class="fw-semibold">Total</div>
                        </div>
                        <div class="display-6 mb-0">@Model.CantidadSubastasCreadas</div>
                    </div>

                    <div class="d-flex justify-content-between align-items-center p-3 border rounded">
                        <div>
                            <div class="text-muted small">Pujas realizadas</div>
                            <div class="fw-semibold">Total</div>
                        </div>
                        <div class="display-6 mb-0">@Model.CantidadPujasRealizadas</div>
                    </div>

                    <div class="mt-3">
                        <small class="text-muted">
                            *Si el usuario no tiene registros asociados, los conteos pueden aparecer como 0.
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
